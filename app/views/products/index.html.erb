
<h1>Products</h1>
<hr>
<% if @new_products.any?%>
  <h2> Check out what's new: </h2>
  <ul>
    <% @new_products.each do |product| %>
      <li><%= link_to product.name, product_path(product) %></li>
    <% end %>
  </ul>
<% end %>

<% if Product.most_reviewed %>
  <h3> Check out our <em>Most Reviewed Product: </em></h3>
  <ul>
    <li><%= link_to Product.most_reviewed.name, product_path(Product.most_reviewed)%></li>
  </ul>
<% end %>

<hr>


<p>Search for a product:</p>
<%= form_tag(products_path, method: :get) do %>
  <%= text_field_tag(:name_search, params[:name_search]) %>
  <%= submit_tag ("Search") %>
<% end %>
<br>
<br>

<% if @search_results %>
  <% if @search_results.any? %>
    <h4>Here are your products:</h4>
    <ul>
      <% @search_results.each do |result| %>
        <li><%= link_to result.name,  product_path(result)%></li>
      <% end %>
      <hr>
    </ul>
  <% else %>
    <p>No results for this query</p>
  <% end %>
<% end %>

<div id="product_list">
  <% if @products.any? %>
    <ul>
      <% @products.each do |product| %>
        <li><%= link_to product.name, product_path(product) %></li>
      <% end %>
    </ul>
  <% else %>
    <p>There are no products yet.</p>
  <% end %>
</div>


<p><%= link_to "Create new product", new_product_path %></p>